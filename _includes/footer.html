<!-- Footer -->
<footer class="text-center">
  <div class="footer-above">
    <div class="container">
      <div class="row">

        <div class="footer-col col-md-4">
          <h3>{{ site.footer.quote }}</h3>
          <p style="white-space: pre-line;">{{ site.quote }}</p>
        </div>

        <div class="footer-col col-md-4">
          <h3>{{ site.footer.social }}</h3>
          <ul class="list-inline">
            {% for network in site.social %}
            <li>
              <a href="{{ network.url }}" class="btn-social btn-outline" target="_blank"><i
                  class="fa-brands fa-fw fa-{{ network.title }}"></i></a>
            </li>
            {% endfor %}
          </ul>
        </div>

        <div class="footer-col col-md-4">
          <h3>{{ site.footer.credits }}</h3>
          <p>{{ site.credits }}</p>
        </div>

      </div>
    </div>
  </div>
  <div class="footer-below">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          Copyright &copy; {{ site.footer.copyright }} 20{{ site.time | date: '%y' }}
          <br>
          <small class="text-muted">Last updated: <span id="last-updated">Loading...</span></small>
        </div>
      </div>
    </div>
  </div>
</footer>

<!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
<div class="scroll-top page-scroll visible-xs visible-sm">
  <a class="btn btn-primary" href="#page-top">
    <i class="fa fa-chevron-up"></i>
  </a>
</div>

<script>
async function getLastCommitDate() {
  try {
    // Using GitHub's raw API endpoint which is more permissive
    const response = await fetch('https://api.github.com/repos/jegeronimo/jegeronimo.github.io/commits?per_page=1', {
      headers: {
        'Accept': 'application/vnd.github.v3+json'
      }
    });
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    const data = await response.json();
    if (data && data[0] && data[0].commit && data[0].commit.author && data[0].commit.author.date) {
      const date = new Date(data[0].commit.author.date);
      const formattedDate = date.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        timeZoneName: 'short'
      });
      document.getElementById('last-updated').textContent = formattedDate;
    } else {
      throw new Error('Invalid data structure received');
    }
  } catch (error) {
    console.error('Error fetching last commit date:', error);
    document.getElementById('last-updated').textContent = 'Unable to fetch update time';
  }
}

// Call the function when the page loads
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', getLastCommitDate);
} else {
  getLastCommitDate();
}
</script>
